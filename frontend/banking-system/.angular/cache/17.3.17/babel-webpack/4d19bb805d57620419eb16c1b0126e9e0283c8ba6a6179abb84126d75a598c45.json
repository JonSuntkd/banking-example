{"ast":null,"code":"import { Subject, takeUntil } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../../application/use-cases/client-simple.use-cases\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ClientListComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelement(1, \"div\", 10);\n    i0.ɵɵtext(2, \" Cargando clientes...\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ClientListComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ClientListComponent_div_9_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.loadClients());\n    });\n    i0.ɵɵtext(3, \" Reintentar \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.error, \" \");\n  }\n}\nfunction ClientListComponent_div_10_tr_17_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function ClientListComponent_div_10_tr_17_button_16_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const client_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.activateClient(client_r4.id));\n    });\n    i0.ɵɵtext(1, \" Activar \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ClientListComponent_div_10_tr_17_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function ClientListComponent_div_10_tr_17_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const client_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.deactivateClient(client_r4.id));\n    });\n    i0.ɵɵtext(1, \" Desactivar \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ClientListComponent_div_10_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"span\", 17);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"td\")(13, \"div\", 18)(14, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function ClientListComponent_div_10_tr_17_Template_button_click_14_listener() {\n      const client_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.editClient(client_r4.id));\n    });\n    i0.ɵɵtext(15, \" Editar \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, ClientListComponent_div_10_tr_17_button_16_Template, 2, 0, \"button\", 20)(17, ClientListComponent_div_10_tr_17_button_17_Template, 2, 0, \"button\", 21);\n    i0.ɵɵelementStart(18, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function ClientListComponent_div_10_tr_17_Template_button_click_18_listener() {\n      const client_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.deleteClient(client_r4.id));\n    });\n    i0.ɵɵtext(19, \" Eliminar \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const client_r4 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r4.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r4.person.fullName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r4.person.address);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(client_r4.person.phone);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.getStatusClass(client_r4.status));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.getStatusText(client_r4.status), \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", !client_r4.status);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", client_r4.status);\n  }\n}\nfunction ClientListComponent_div_10_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 25)(2, \"em\");\n    i0.ɵɵtext(3, \"No se encontraron clientes\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ClientListComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"table\", 14)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Nombre Completo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Direcci\\u00F3n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Tel\\u00E9fono\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Estado\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Acciones\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"tbody\");\n    i0.ɵɵtemplate(17, ClientListComponent_div_10_tr_17_Template, 20, 8, \"tr\", 15)(18, ClientListComponent_div_10_tr_18_Template, 4, 0, \"tr\", 16);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.filteredClients)(\"ngForTrackBy\", ctx_r1.trackByClientId);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.filteredClients.length === 0);\n  }\n}\n/**\n * Client List Component following MVC pattern\n * Controller for managing client list view and operations\n */\nexport let ClientListComponent = /*#__PURE__*/(() => {\n  class ClientListComponent {\n    constructor(clientUseCases, router) {\n      this.clientUseCases = clientUseCases;\n      this.router = router;\n      this.clients = [];\n      this.filteredClients = [];\n      this.loading = false;\n      this.error = null;\n      this.searchTerm = '';\n      this.destroy$ = new Subject();\n    }\n    ngOnInit() {\n      this.loadClients();\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    /**\n     * Load all clients from the system\n     */\n    loadClients() {\n      this.loading = true;\n      this.error = null;\n      this.clientUseCases.getAllClients().pipe(takeUntil(this.destroy$)).subscribe({\n        next: clients => {\n          this.clients = clients;\n          this.filteredClients = clients;\n          this.loading = false;\n        },\n        error: error => {\n          this.error = 'Error al cargar los clientes: ' + error.message;\n          this.loading = false;\n        }\n      });\n    }\n    /**\n     * Filter clients based on search term\n     */\n    onSearch() {\n      if (!this.searchTerm.trim()) {\n        this.filteredClients = this.clients;\n        return;\n      }\n      const term = this.searchTerm.toLowerCase();\n      this.filteredClients = this.clients.filter(client => client.person.fullName.toLowerCase().includes(term) || client.person.phone.toLowerCase().includes(term) || client.person.address.toLowerCase().includes(term));\n    }\n    /**\n     * Navigate to create new client form\n     */\n    createClient() {\n      this.router.navigate(['/clientes/nuevo']);\n    }\n    /**\n     * Navigate to edit client form\n     */\n    editClient(clientId) {\n      this.router.navigate(['/clientes/editar', clientId]);\n    }\n    /**\n     * Activate client account\n     */\n    activateClient(clientId) {\n      if (!confirm('¿Está seguro de que desea activar este cliente?')) {\n        return;\n      }\n      this.clientUseCases.activateClient(clientId).pipe(takeUntil(this.destroy$)).subscribe({\n        next: () => {\n          this.loadClients();\n        },\n        error: error => {\n          this.error = 'Error al activar el cliente: ' + error.message;\n        }\n      });\n    }\n    /**\n     * Deactivate client account\n     */\n    deactivateClient(clientId) {\n      if (!confirm('¿Está seguro de que desea desactivar este cliente?')) {\n        return;\n      }\n      this.clientUseCases.deactivateClient(clientId).pipe(takeUntil(this.destroy$)).subscribe({\n        next: () => {\n          this.loadClients();\n        },\n        error: error => {\n          this.error = 'Error al desactivar el cliente: ' + error.message;\n        }\n      });\n    }\n    /**\n     * Delete client from the system\n     */\n    deleteClient(clientId) {\n      if (!confirm('¿Está seguro de que desea eliminar este cliente? Esta acción no se puede deshacer.')) {\n        return;\n      }\n      this.clientUseCases.deleteClient(clientId).pipe(takeUntil(this.destroy$)).subscribe({\n        next: () => {\n          this.loadClients();\n        },\n        error: error => {\n          this.error = 'Error al eliminar el cliente: ' + error.message;\n        }\n      });\n    }\n    /**\n     * Get status badge class for client\n     */\n    getStatusClass(status) {\n      return status ? 'status-active' : 'status-inactive';\n    }\n    /**\n     * Get status text for client\n     */\n    getStatusText(status) {\n      return status ? 'Activo' : 'Inactivo';\n    }\n    /**\n     * Track by function for ngFor optimization\n     */\n    trackByClientId(index, client) {\n      return client.id || index;\n    }\n    static {\n      this.ɵfac = function ClientListComponent_Factory(t) {\n        return new (t || ClientListComponent)(i0.ɵɵdirectiveInject(i1.ClientUseCases), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ClientListComponent,\n        selectors: [[\"app-client-list\"]],\n        decls: 11,\n        vars: 4,\n        consts: [[1, \"content-header\"], [1, \"page-title\"], [1, \"action-bar\"], [1, \"search-container\"], [\"type\", \"text\", \"placeholder\", \"Buscar\", 1, \"search-input\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [\"class\", \"text-center\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"data-table\", 4, \"ngIf\"], [1, \"text-center\"], [1, \"loading-spinner\"], [1, \"alert\", \"alert-danger\"], [1, \"btn\", \"btn-secondary\", \"mt-2\", 3, \"click\"], [1, \"data-table\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [4, \"ngIf\"], [1, \"status-badge\", 3, \"ngClass\"], [1, \"d-flex\", \"gap-1\"], [\"title\", \"Editar\", 1, \"btn\", \"btn-warning\", \"btn-sm\", 3, \"click\"], [\"class\", \"btn btn-success btn-sm\", \"title\", \"Activar\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-secondary btn-sm\", \"title\", \"Desactivar\", 3, \"click\", 4, \"ngIf\"], [\"title\", \"Eliminar\", 1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"click\"], [\"title\", \"Activar\", 1, \"btn\", \"btn-success\", \"btn-sm\", 3, \"click\"], [\"title\", \"Desactivar\", 1, \"btn\", \"btn-secondary\", \"btn-sm\", 3, \"click\"], [\"colspan\", \"6\", 1, \"text-center\"]],\n        template: function ClientListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n            i0.ɵɵtext(2, \"Clientes\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"input\", 4);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function ClientListComponent_Template_input_ngModelChange_5_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.searchTerm, $event) || (ctx.searchTerm = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"input\", function ClientListComponent_Template_input_input_5_listener() {\n              return ctx.onSearch();\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function ClientListComponent_Template_button_click_6_listener() {\n              return ctx.createClient();\n            });\n            i0.ɵɵtext(7, \" Nuevo \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(8, ClientListComponent_div_8_Template, 3, 0, \"div\", 6)(9, ClientListComponent_div_9_Template, 4, 1, \"div\", 7)(10, ClientListComponent_div_10_Template, 19, 3, \"div\", 8);\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchTerm);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error);\n          }\n        },\n        dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n        styles: [\".btn-sm[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:.875rem;min-width:auto}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:.375rem;margin-bottom:1rem}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.table[_ngcontent-%COMP%]{font-size:.9rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.btn-group[_ngcontent-%COMP%]{display:flex;gap:.25rem}.status-badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem}@media (max-width: 768px){.table[_ngcontent-%COMP%]{font-size:.8rem}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem}}\"]\n      });\n    }\n  }\n  return ClientListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}